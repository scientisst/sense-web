(self["webpackChunksense_vue"]=self["webpackChunksense_vue"]||[]).push([[443],{4019:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},260:function(t,e,n){"use strict";var i,a,s,o=n(4019),r=n(9781),c=n(7854),l=n(614),h=n(111),d=n(2597),u=n(648),p=n(6330),f=n(8880),g=n(1320),v=n(3070).f,w=n(7976),m=n(9518),y=n(7674),b=n(5112),S=n(9711),A=c.Int8Array,C=A&&A.prototype,_=c.Uint8ClampedArray,k=_&&_.prototype,I=A&&m(A),T=C&&m(C),R=Object.prototype,D=c.TypeError,E=b("toStringTag"),L=S("TYPED_ARRAY_TAG"),M=S("TYPED_ARRAY_CONSTRUCTOR"),x=o&&!!y&&"Opera"!==u(c.opera),W=!1,U={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},B={BigInt64Array:8,BigUint64Array:8},O=function(t){if(!h(t))return!1;var e=u(t);return"DataView"===e||d(U,e)||d(B,e)},P=function(t){if(!h(t))return!1;var e=u(t);return d(U,e)||d(B,e)},V=function(t){if(P(t))return t;throw D("Target is not a typed array")},N=function(t){if(l(t)&&(!y||w(I,t)))return t;throw D(p(t)+" is not a typed array constructor")},F=function(t,e,n,i){if(r){if(n)for(var a in U){var s=c[a];if(s&&d(s.prototype,t))try{delete s.prototype[t]}catch(o){try{s.prototype[t]=e}catch(l){}}}T[t]&&!n||g(T,t,n?e:x&&C[t]||e,i)}},Y=function(t,e,n){var i,a;if(r){if(y){if(n)for(i in U)if(a=c[i],a&&d(a,t))try{delete a[t]}catch(s){}if(I[t]&&!n)return;try{return g(I,t,n?e:x&&I[t]||e)}catch(s){}}for(i in U)a=c[i],!a||a[t]&&!n||g(a,t,e)}};for(i in U)a=c[i],s=a&&a.prototype,s?f(s,M,a):x=!1;for(i in B)a=c[i],s=a&&a.prototype,s&&f(s,M,a);if((!x||!l(I)||I===Function.prototype)&&(I=function(){throw D("Incorrect invocation")},x))for(i in U)c[i]&&y(c[i],I);if((!x||!T||T===R)&&(T=I.prototype,x))for(i in U)c[i]&&y(c[i].prototype,T);if(x&&m(k)!==T&&y(k,T),r&&!d(T,E))for(i in W=!0,v(T,E,{get:function(){return h(this)?this[L]:void 0}}),U)c[i]&&f(c[i],L,i);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:x,TYPED_ARRAY_CONSTRUCTOR:M,TYPED_ARRAY_TAG:W&&L,aTypedArray:V,aTypedArrayConstructor:N,exportTypedArrayMethod:F,exportTypedArrayStaticMethod:Y,isView:O,isTypedArray:P,TypedArray:I,TypedArrayPrototype:T}},8544:function(t,e,n){var i=n(7293);t.exports=!i((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},9518:function(t,e,n){var i=n(7854),a=n(2597),s=n(614),o=n(7908),r=n(6200),c=n(8544),l=r("IE_PROTO"),h=i.Object,d=h.prototype;t.exports=c?h.getPrototypeOf:function(t){var e=o(t);if(a(e,l))return e[l];var n=e.constructor;return s(n)&&e instanceof n?n.prototype:e instanceof h?d:null}},4590:function(t,e,n){var i=n(7854),a=n(3002),s=i.RangeError;t.exports=function(t,e){var n=a(t);if(n%e)throw s("Wrong offset");return n}},3002:function(t,e,n){var i=n(7854),a=n(9303),s=i.RangeError;t.exports=function(t){var e=a(t);if(e<0)throw s("The argument can't be less than 0");return e}},8675:function(t,e,n){"use strict";var i=n(260),a=n(6244),s=n(9303),o=i.aTypedArray,r=i.exportTypedArrayMethod;r("at",(function(t){var e=o(this),n=a(e),i=s(t),r=i>=0?i:n+i;return r<0||r>=n?void 0:e[r]}))},3462:function(t,e,n){"use strict";var i=n(7854),a=n(6916),s=n(260),o=n(6244),r=n(4590),c=n(7908),l=n(7293),h=i.RangeError,d=i.Int8Array,u=d&&d.prototype,p=u&&u.set,f=s.aTypedArray,g=s.exportTypedArrayMethod,v=!l((function(){var t=new Uint8ClampedArray(2);return a(p,t,{length:1,0:3},1),3!==t[1]})),w=v&&s.NATIVE_ARRAY_BUFFER_VIEWS&&l((function(){var t=new d(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));g("set",(function(t){f(this);var e=r(arguments.length>1?arguments[1]:void 0,1),n=c(t);if(v)return a(p,this,n,e);var i=this.length,s=o(n),l=0;if(s+e>i)throw h("Wrong length");while(l<s)this[e+l]=n[l++]}),!v||w)},7105:function(t,e,n){"use strict";n.d(e,{Z:function(){return v}});var i=n(3396),a=n(7139),s=n.p+"img/SI-Sense-Vert-Col.9079a352.svg";const o=t=>((0,i.dD)("data-v-055a47a0"),t=t(),(0,i.Cn)(),t),r={class:"top-bar"},c=o((()=>(0,i._)("i",{class:"arrow"},null,-1))),l=[c],h={id:"title"},d=o((()=>(0,i._)("img",{id:"logo",alt:"Sense logo",src:s},null,-1)));function u(t,e,n,s,o,c){const u=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",r,[(0,i._)("a",{onClick:e[0]||(e[0]=e=>t.$router.go(-1))},l),(0,i._)("span",h,(0,a.zw)(n.title),1),(0,i.Wm)(u,{to:"/"},{default:(0,i.w5)((()=>[d])),_:1})])}var p={name:"TopBar",props:{title:{default:"",type:String}}},f=n(89);const g=(0,f.Z)(p,[["render",u],["__scopeId","data-v-055a47a0"]]);var v=g},8599:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return Ot}});var i=n(3396),a=n(7139);const s=t=>((0,i.dD)("data-v-22d69732"),t=t(),(0,i.Cn)(),t),o={class:"about"},r={class:"buttons"},c={key:0},l={key:1},h={key:2},d=["href"],u=s((()=>(0,i._)("div",{style:{height:"32px"}},null,-1)));function p(t,e,n,s,p,f){const g=(0,i.up)("top-bar"),v=(0,i.up)("loading-indicator"),w=(0,i.up)("channels-charts");return(0,i.wg)(),(0,i.iD)("div",o,[(0,i.Wm)(g,{title:"Live Acquisition"}),(0,i._)("div",r,[t.connected?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"button",ref:"connect",onClick:e[0]||(e[0]=(...t)=>f.disconnect&&f.disconnect(...t))}," disconnect ",512)):((0,i.wg)(),(0,i.iD)("button",{key:1,class:"button",ref:"connect",onClick:e[1]||(e[1]=(...t)=>f.connect&&f.connect(...t))},[t.connecting?((0,i.wg)(),(0,i.iD)("div",c,[(0,i.Wm)(v)])):((0,i.wg)(),(0,i.iD)("div",l,"connect"))],512)),t.connected?((0,i.wg)(),(0,i.iD)("div",h,[t.connected&&t.live?((0,i.wg)(),(0,i.iD)("button",{key:0,class:(0,a.C_)(t.download?"button recording":"button"),id:"stop",onClick:e[2]||(e[2]=(...t)=>f.stop&&f.stop(...t))}," Stop ",2)):((0,i.wg)(),(0,i.iD)("button",{key:1,class:"button",id:"start",onClick:e[3]||(e[3]=(...t)=>f.start&&f.start(...t))},"start"))])):(0,i.kq)("",!0),(0,i._)("a",{class:(0,a.C_)(["button a-button active",{hide:""==t.downloadLink}]),href:t.downloadLink,onClick:e[4]||(e[4]=(...e)=>t.test&&t.test(...e)),id:"downloadBtn"}," Download ",10,d)]),u,(0,i.Wm)(w,{ref:"charts",channels:t.channels,samplingRate:t.samplingRate,refreshRate:15},null,8,["channels","samplingRate"])])}var f=n(7105);const g={class:"charts"},v={class:"channel-title"};function w(t,e,n,s,o,r){const c=(0,i.up)("channel-chart");return(0,i.wg)(),(0,i.iD)("div",g,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.channelsData,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t.id},[(0,i._)("div",v,"AI"+(0,a.zw)(t.id),1),((0,i.wg)(),(0,i.j4)(c,{ref_for:!0,ref:"channels",data:t.data,key:"chart"+t.id,showXAxisLabels:t.last},null,8,["data","showXAxisLabels"]))])))),128))])}function m(t,e,n,a,s,o){const r=(0,i.up)("apexchart");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(r,{height:"300",type:"line",ref:"chart",options:t.options,series:t.series},null,8,["options","series"])])}var y={name:"ChannelChart",props:{showXAxisLabels:{default:!1,type:Boolean}},data:function(){return{options:{chart:{id:"vuechart-example",animations:{enabled:!1,easing:"linear",dynamicAnimation:{speed:200}},toolbar:{show:!1},zoom:{enabled:!1}},colors:["var(--main-color)"],grid:{show:!0,xaxis:{lines:{show:!0}},yaxis:{lines:{show:!0}}},tooltip:{enabled:!1},stroke:{width:3,curve:"smooth"},dataLabels:{enabled:!1},xaxis:{type:"numeric",tickAmount:5,labels:{formatter:function(t,e){return new Date(e).toISOString().slice(-13,-5)}}},yaxis:{min:0,max:4096,tickAmount:4},markers:{size:0}},series:[{name:"series-1",data:[]}]}},methods:{updateChart(t){this.series=[{data:t}]}}},b=n(89);const S=(0,b.Z)(y,[["render",m]]);var A=S,C={name:"ChannelsCharts",components:{ChannelChart:A},props:{channels:{type:Array},samplingRate:{require:!0,type:Number},refreshRate:{default:5,type:Number}},data:function(){return{channelsData:this.channels.map(((t,e)=>({id:t,data:[],last:e==this.channels.length-1}))),windowInSeconds:3,dt:1e3/this.samplingRate,timestamp:0}},mounted:function(){this.interval=setInterval((()=>{this.channelsData[0].data.length>0&&this.$refs.channels.forEach(((t,e)=>{t.updateChart(this.channelsData[e].data)}))}),Math.ceil(1e3/this.refreshRate))},beforeUnmount(){this.interval&&(clearInterval(this.interval),this.interval=void 0)},methods:{addFrames(t){t.forEach((t=>{this.timestamp+=this.dt,t.a.forEach(((t,e)=>{this.channelsData[e].data.push([this.timestamp,t])}))}));const e=this.samplingRate*this.windowInSeconds;this.channelsData.forEach(((t,n)=>{const i=t.data;i.length>=e&&(this.channelsData[n].data=i.slice(i.length-e))}))}}};const _=(0,b.Z)(C,[["render",w],["__scopeId","data-v-612548b3"]]);var k=_;const I=t=>((0,i.dD)("data-v-05d67480"),t=t(),(0,i.Cn)(),t),T={class:"lds-ellipsis"},R=I((()=>(0,i._)("div",null,null,-1))),D=I((()=>(0,i._)("div",null,null,-1))),E=I((()=>(0,i._)("div",null,null,-1))),L=I((()=>(0,i._)("div",null,null,-1))),M=[R,D,E,L];function x(t,e,n,a,s,o){return(0,i.wg)(),(0,i.iD)("div",T,M)}var W=n(9242);const U={name:"LoadingIndicator",props:{color:{default:"#ef4b59",type:String}}},B=()=>{(0,W.sj)((t=>({"393cf281":t.color})))},O=U.setup;U.setup=O?(t,e)=>(B(),O(t,e)):B;var P=U;const V=(0,b.Z)(P,[["render",x],["__scopeId","data-v-05d67480"]]);var N=V;function F(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n(1703);function Y(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Z(t,e,n){Y(t,e),e.set(t,n)}function H(t,e){return e.get?e.get.call(t):e.value}function q(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function z(t,e){var n=q(t,e,"get");return H(t,n)}function j(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}function $(t,e,n){var i=q(t,e,"set");return j(t,i,n),n}n(8675),n(3462);class G{constructor(t){F(this,"digital",[0,0,0,0]),F(this,"seq",-1),F(this,"a",null),F(this,"mv",null),this.a=new Array(t),this.mv=new Array(t)}}function X(t,e="little"){"little"==e&&(t=t.reverse());let n=0;return t.forEach((t=>{n<<=8,n|=t})),n}function K(t){return new Promise((e=>setTimeout(e,t)))}function J(t){if(!t)return new ArrayBuffer(0);const e=[];e.unshift(255&t);while(t>=256)t>>>=8,e.unshift(255&t);return e}const Q=65536,tt=Q/2,et=1e3,nt=1200,it=64,at=2880,st=at+it,ot=4096,rt=1,ct=3,lt=3,ht=3.399,dt=[2240,2297,2352,2405,2457,2512,2564,2616,2664,2709,2754,2795,2832,2868,2903,2937,2969,3e3,3030,3060],ut=[2667,2706,2745,2780,2813,2844,2873,2901,2928,2956,2982,3006,3032,3059,3084,3110,3135,3160,3184,3209],pt=[2238,2293,2347,2399,2451,2507,2561,2613,2662,2710,2754,2792,2831,2869,2904,2937,2968,2999,3029,3059],ft=[2657,2698,2738,2774,2807,2838,2867,2894,2921,2946,2971,2996,3020,3043,3067,3092,3116,3139,3162,3185];class gt{constructor(t){this.adcNum=X(t.slice(0,4)),this.atten=X(t.slice(4,8)),this.bitWidth=X(t.slice(8,12)),this.coeffA=X(t.slice(12,16)),this.coeffB=X(t.slice(16,20)),this.vref=X(t.slice(20,24)),this.atten==ct?(this.adcNum==rt?this.lowCurve=dt:this.lowCurve=pt,this.adcNum==rt?this.highCurve=ut:this.highCurve=ft):(this.lowCurve=0,this.highCurve=0)}static interpolateTwoPoints(t,e,n,i){return Math.floor((t*n+e*i-t*i+Math.floor(n/2))/2)}static calculateVoltageLinear(t,e,n){return Math.floor((e*t+tt)/Q)+n}static calculateVoltageLut(t,e,n,i){const a=Math.floor((t-at)/it),s=nt-e,o=e-et,r=(a+1)*it+at-t,c=t-(a*it+at),l=n[a],h=n[a+1],d=i[a],u=i[a+1];let p=l*s*r+d*o*r+h*s*c+u*o*c;return p+=Math.floor((nt-et)*it/2),p=Math.floor(p/(nt-et)*it),p}espAdcCalRawToVoltage(t){let e;if(t<<=lt-this.bitWidth,t>ot-1&&(t=ot-1),this.atten==ct&&t>=at){const n=calculateVoltageLut(adc,this.vref,this.lowCurve,this.highCurve);if(t<=st){const i=gt.calculateVoltageLinear(t,this.coeffA,this.coeffB);e=gt.interpolateTwoPoints(i,n,it,t-at)}else e=n}else e=gt.calculateVoltageLinear(t,this.coeffA,this.coeffB);return Math.floor(e*ht)}}const vt=2,wt=2e3,mt=7,yt=8,bt=4096;var St=new WeakMap,At=new WeakMap,Ct=new WeakMap,_t=new WeakMap,kt=new WeakMap,It=new WeakMap,Tt=new WeakMap,Rt=new WeakMap,Dt=new WeakMap,Et=new WeakMap,Lt=new WeakMap,Mt=new WeakMap,xt=new WeakMap;class Wt{constructor(t){Z(this,St,{writable:!0,value:void 0}),Z(this,At,{writable:!0,value:0}),Z(this,Ct,{writable:!0,value:void 0}),Z(this,_t,{writable:!0,value:void 0}),Z(this,kt,{writable:!0,value:[]}),Z(this,It,{writable:!0,value:0}),F(this,"connected",!1),Z(this,Tt,{writable:!0,value:void 0}),F(this,"live",!1),Z(this,Rt,{writable:!0,value:null}),Z(this,Dt,{writable:!0,value:null}),Z(this,Et,{writable:!0,value:!0}),Z(this,Lt,{writable:!0,value:null}),Z(this,Mt,{writable:!0,value:[]}),Z(this,xt,{writable:!0,value:void 0}),$(this,St,t),navigator.serial.addEventListener("connect",(t=>{console.log(t),this.connected=!0})),navigator.serial.addEventListener("disconnect",(t=>{console.log(t),this.connected=!1}))}static async requestPort(){const t=await navigator.serial.requestPort();return new Wt(t)}static checkCRC4(t,e){const n=[0,3,6,5,12,15,10,9,11,8,13,14,7,4,1,2];let i,a=0;for(let s=0;s<e-1;s++)i=t[s],a=n[a]^i>>4,a=n[a]^15&i;return a=n[a]^t[t.length-1]>>4,a=n[a],a==(15&t[t.length-1])}async connect(){$(this,Tt,!0),await z(this,St).open({baudRate:115200}),$(this,Rt,z(this,St).writable.getWriter()),$(this,Lt,this.readUntilClosed()),await this.changeAPI(vt),await this.versionAndAdcChars(),$(this,Tt,!1),this.connected=!0,console.log("ScientISST Sense CONNECTED")}async disconnect(){$(this,Et,!1),this.live&&await this.stop(),z(this,Rt)&&z(this,Rt).releaseLock(),z(this,Dt)&&(z(this,Dt).cancel(),await z(this,Lt)),this.clear(),this.connected=!1,console.log("ScientISST Sense DISCONNECTED")}async versionAndAdcChars(){if(!this.connected&&!z(this,Tt))throw"ScientISST not connected";if(this.live)throw"ScientISST not idle";const t=J(7);await this.send(t);const e=await this.recv(1024),n=new TextDecoder,i=n.decode(new Uint8Array(e)),a=i.indexOf("\0"),s=i.substring(0,a);return $(this,xt,new gt(e.slice(a+1))),console.log("ScientISST Board Vref: "+z(this,xt).vref),console.log("ScientISST Board ADC Attenuation Mode: "+z(this,xt).atten),s}async changeAPI(t){if(!this.connected&&!z(this,Tt))throw"ScientISST not connected";if(this.live)throw"ScientISST not idle";t<<=4,t|=3;const e=J(t);await this.send(e)}async start(t,e,n=5){if(!this.connected)throw"ScientISST not connected";if(this.live)throw"ScientISST not idle";let i=0;$(this,kt,[]),$(this,It,0),e.forEach((t=>{var e;if(t<=0||t>8)throw"Invalid channel";z(this,kt).push(t);const n=1<<t-1;if(i&n)throw $(this,It,0),"Invalid channel";i|=n,$(this,It,(e=z(this,It),e++,e))}));const a=J(t);a.push(67),await this.send(a,4),this.clear();const s=J(i);if(s.push(1),await this.send(s),$(this,At,this.getPacketSize()),$(this,Ct,z(this,At)*Math.max(Math.floor(t/n),1)),z(this,Ct)>bt&&$(this,Ct,bt-bt%z(this,At)),z(this,Ct)%z(this,At))throw $(this,It,0),console.log("Error, bytes_to_read needs to be devisible by packet_size"),"Invalid parameter";$(this,_t,Math.floor(z(this,Ct)/z(this,At))),this.live=!0}async stop(){if(!this.connected)throw"ScientISST not connected";if(!this.live)throw"ScientISST not live";const t=0;this.live=!1,await this.send([t]),$(this,It,0),this.clear()}async read(t=!0){if(!this.connected)throw"ScientISST not connected";if(!this.live)throw"ScientISST not live";const e=new Array(z(this,_t)),n=await this.recv(z(this,Ct));let i,a,s,o,r,c,l,h;for(let d=0;d<z(this,_t);d++){i=n.splice(0,z(this,At)),a=0;while(!Wt.checkCRC4(i,z(this,At)))console.log("Error checking CRC4"),h=this.recv(1),n.push(h),i=i.slice(1).push(n.splice(0,1));s=new G(z(this,It)),e[d]=s,s.seq=i[i.length-1]>>4;for(let t=0;t<4;t++)0==(i[i.length-2]&128>>t)?s.digital[t]=0:s.digital[t]=1;o=0;for(let e=0;e<z(this,It);e++)r=z(this,It)-1-e,c=z(this,kt)[r],c==mt||c==yt||(a?(l=i[o+1]<<8,l|=i[o],l>>=4,s.a[r]=l,o+=2,a=0):(l=i[o+1]<<8,l|=i[o],l&=4095,s.a[r]=l,o+=1,a=1),t&&(s.mv[r]=z(this,xt).espAdcCalRawToVoltage(s.a[r])))}return e}getPacketSize(){let t=0,e=0,n=0;return z(this,kt).forEach((t=>{t&&(t==mt||t==yt?n++:e++)})),t=3*n,t+=e%2?(12*e-4)/8:12*e/8,t+=2,Math.floor(t)}async readUntilClosed(){while(z(this,St).readable&&z(this,Et)){$(this,Dt,z(this,St).readable.getReader());try{while(1){const{value:t,done:e}=await z(this,Dt).read();if(e)break;t&&z(this,Mt).push(...t)}}catch(t){console.log(t)}finally{z(this,Dt).releaseLock()}}await z(this,St).close()}clear(){$(this,Mt,[])}async recv(t,e=!1){let n,i=[],a=0,s=0,o=0;const r=100;let c=wt/r;while(i.length!=t&&c>0)s=z(this,Mt).length,s>0?(a=t-i.length,o=Math.min(a,s),n=z(this,Mt).splice(0,o),i.push(...n)):(await K(r),c--);if(e&&console.log("Bytes read: "+i),0==i.length)throw"Error contacting device";return i}async send(t,e,n=!1){e=e||t.length;const i=e-t.length;for(let a=0;a<i;a++)t.unshift(0);t.length>1&&(t=t.reverse()),n&&console.log("Bytes sent: "+t),null!=z(this,St).writable?(await z(this,Rt).write(new Uint8Array(t)),await K(250)):console.warn("unable to find writable port")}}var Ut={name:"LiveView",components:{TopBar:f.Z,ChannelsCharts:k,LoadingIndicator:N},props:{},data:function(){return{scientisstCopy:void 0,samplingRate:1e3,channels:[1,2,3,4,5,6],live:!1,connected:!1,connecting:!1,fileData:"",download:!0,downloadLink:"",downloadAutomatic:!1}},created(){localStorage.samplingRate&&(this.samplingRate=parseInt(localStorage.samplingRate));let t=[];[1,2,3,4,5,6].forEach((e=>{localStorage["ch"+e]?"true"==localStorage["ch"+e]&&t.push(e):t.push(e)})),this.channels=t},beforeUnmount(){this.interval&&(clearInterval(this.interval),this.interval=void 0),this.scientisst&&this.scientisst.connected&&this.scientisst.disconnect()},methods:{connect(){Wt.requestPort().then((async t=>{if(t){this.connecting=!0,this.scientisst=t;try{await this.scientisst.connect(),this.connected=!0}catch(e){}this.connecting=!1}}))},disconnect(){this.scientisst&&this.scientisst.disconnect().then((()=>{this.scientisst=null,this.connected=!1}))},fileHeader(){let t="";return t+="NSeq\tI1\tI2\tO1\tO2",this.channels.forEach((e=>{t+="\t",t+="AI"+e+"_raw",t+="\t",t+="AI"+e+"_mv"})),t},start(){this.scientisst&&(this.fileData=this.fileHeader(),this.scientisst.start(this.samplingRate,this.channels).then((async()=>{let t;this.live=!0;while(this.scientisst.live)t=await this.scientisst.read(),this.$refs.charts.addFrames(t),this.download&&this.addFramesToFile(t)})))},stop(){this.scientisst.stop().then((()=>{this.live=!1,this.download&&(this.saveFile(Date.now().toString(),this.fileData),this.fileData="")}))},addFramesToFile(t){let e;t.forEach((t=>{e=t.seq,e+="\t",e+=t.digital.join("\t");for(let n=0;n<this.channels.length;n++)e+="\t",e+=t.a[n],e+="\t",e+=t.mv[n];this.fileData+="\n"+e}))},saveFile(t,e){const n=new Blob([e],{type:"text/plain"});window.URL=window.URL||window.webkitURL,this.downloadLink=window.URL.createObjectURL(n);const i=document.getElementById("downloadBtn");i.setAttribute("download",t+".csv"),this.downloadAutomatic&&i.downloadBtn.click()}}};const Bt=(0,b.Z)(Ut,[["render",p],["__scopeId","data-v-22d69732"]]);var Ot=Bt},2903:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return p}});var i=n(3396),a=n.p+"img/logo-sad.41568157.svg";const s=t=>((0,i.dD)("data-v-2811312e"),t=t(),(0,i.Cn)(),t),o={class:"not-compatible"},r=s((()=>(0,i._)("div",{class:"center"},[(0,i._)("img",{src:a}),(0,i._)("h2",null,"Your browser is not compatible..."),(0,i._)("p",null,[(0,i.Uk)(" The SENSE web application is only compatible with "),(0,i._)("b",null,"Google Chrome"),(0,i.Uk)(". "),(0,i._)("br"),(0,i.Uk)(" If you don't have Google Chrome, you can download it here: ")]),(0,i._)("div",{style:{height:"1em"}}),(0,i._)("button",{class:"button",id:"download-button",onclick:" window.open('https://www.google.com/chrome/','_blank')"},[(0,i._)("img",{src:"https://www.google.com/chrome/static/images/chrome-logo.svg"}),(0,i._)("span",{style:{width:"1em"}}),(0,i._)("span",null,"Google Chrome")])],-1)));function c(t,e,n,a,s,c){const l=(0,i.up)("logo-top-left");return(0,i.wg)(),(0,i.iD)("div",o,[(0,i.Wm)(l),r])}var l=n(7105),h={name:"NotCompatibleView",components:{LogoTopLeft:l.Z}},d=n(89);const u=(0,d.Z)(h,[["render",c],["__scopeId","data-v-2811312e"]]);var p=u},7411:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return P}});var i=n(3396);const a={class:"settings"},s=(0,i._)("div",{style:{height:"16px"}},null,-1);function o(t,e,n,o,r,c){const l=(0,i.up)("top-bar"),h=(0,i.up)("sampling-rate"),d=(0,i.up)("channels-selector");return(0,i.wg)(),(0,i.iD)("div",a,[(0,i.Wm)(l,{title:"Sense Settings"}),(0,i.Wm)(h),s,(0,i.Wm)(d)])}var r=n(7105),c=n(7139),l=n.p+"img/front.faa26ba8.png",h=n.p+"img/back.1c2de1ca.png";const d=t=>((0,i.dD)("data-v-6ee0808c"),t=t(),(0,i.Cn)(),t),u={class:"channels"},p=d((()=>(0,i._)("h3",null,"CHANNELS",-1))),f={class:"buttons-row"},g=["id","onClick"],v=d((()=>(0,i._)("div",{style:{height:"28px"}},null,-1))),w={class:"boards-container"},m={class:"board-container"},y={class:"channel-highlight",ref:"frontHighlight"},b=d((()=>(0,i._)("img",{src:l,class:"board-img"},null,-1))),S={class:"board-container"},A={class:"channel-highlight",ref:"backHighlight"},C=d((()=>(0,i._)("img",{src:h,class:"board-img"},null,-1)));function _(t,e,n,a,s,o){return(0,i.wg)(),(0,i.iD)("div",u,[p,(0,i._)("div",f,[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)([1,2,3,4,5,6],(t=>(0,i._)("button",{key:t.id,class:(0,c.C_)(this["ch"+t]?"channel-button active":"channel-button"),id:"ch"+t,onClick:e=>this["ch"+t]=!this["ch"+t]},(0,c.zw)(t),11,g))),64))]),v,(0,i._)("div",w,[(0,i._)("div",m,[(0,i._)("div",y,null,512),b]),(0,i._)("div",S,[(0,i._)("div",A,null,512),C])])])}var k={name:"ChannelsSelector",data(){return{ch1:!0,ch2:!0,ch3:!0,ch4:!0,ch5:!0,ch6:!0}},mounted(){localStorage.ch1&&(this.ch1=localStorage.ch1),localStorage.ch2&&(this.ch2=localStorage.ch2),localStorage.ch3&&(this.ch3=localStorage.ch3),localStorage.ch4&&(this.ch4=localStorage.ch4),localStorage.ch5&&(this.ch5=localStorage.ch5),localStorage.ch6&&(this.ch6=localStorage.ch6),[1,2,3,4,5,6].forEach((t=>{localStorage["ch"+t]&&(this["ch"+t]="true"==localStorage["ch"+t])})),[1,3,5].forEach((t=>{const e=document.getElementById("ch"+t);e.addEventListener("mouseover",(()=>{this.$refs.frontHighlight.classList.add("AI"+t)}),!1),e.addEventListener("mouseout",(()=>{this.$refs.frontHighlight.classList.remove("AI"+t)}),!1)})),[2,4,6].forEach((t=>{const e=document.getElementById("ch"+t);e.addEventListener("mouseover",(()=>{this.$refs.backHighlight.classList.add("AI"+t)}),!1),e.addEventListener("mouseout",(()=>{this.$refs.backHighlight.classList.remove("AI"+t)}),!1)}))},watch:{ch1(t){this.emptyChannels()&&(t=!0,this.ch1=t),localStorage.ch1=t},ch2(t){this.emptyChannels()&&(this.ch1=!0),localStorage.ch2=t},ch3(t){this.emptyChannels()&&(this.ch1=!0),localStorage.ch3=t},ch4(t){this.emptyChannels()&&(this.ch1=!0),localStorage.ch4=t},ch5(t){this.emptyChannels()&&(this.ch1=!0),localStorage.ch5=t},ch6(t){this.emptyChannels()&&(this.ch1=!0),localStorage.ch6=t}},methods:{emptyChannels(){return!(this.ch1||this.ch2||this.ch3||this.ch4||this.ch5||this.ch6)}}},I=n(89);const T=(0,I.Z)(k,[["render",_],["__scopeId","data-v-6ee0808c"]]);var R=T,D=n(9242);const E=t=>((0,i.dD)("data-v-4b3fb5fa"),t=t(),(0,i.Cn)(),t),L=E((()=>(0,i._)("h3",null,"SAMPLING RATE",-1)));function M(t,e,n,a,s,o){return(0,i.wg)(),(0,i.iD)(i.HY,null,[L,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>s.samplingRate=t),type:"number",class:"input",min:"1",max:"16000",size:"5"},null,512),[[D.nr,s.samplingRate]])],64)}var x={name:"SamplingRate",data(){return{samplingRate:1e3}},mounted(){localStorage.samplingRate&&(this.samplingRate=localStorage.samplingRate)},watch:{samplingRate(t){t>16e3?t=16e3:t<1&&(t=1),localStorage.samplingRate=t,this.samplingRate=t}}};const W=(0,I.Z)(x,[["render",M],["__scopeId","data-v-4b3fb5fa"]]);var U=W,B={name:"SettingsView",components:{TopBar:r.Z,ChannelsSelector:R,SamplingRate:U}};const O=(0,I.Z)(B,[["render",o]]);var P=O}}]);
//# sourceMappingURL=about.75b6d167.js.map